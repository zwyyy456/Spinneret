#ifndef _MV_IMAGE_H
#define _MV_IMAGE_H

#include "GigECamera_Types.h"

#ifdef MVGIGE_EXPORTS
#define MVGIGE_API __declspec(dllexport)
#else
#define MVGIGE_API __declspec(dllimport)
#endif

class MVGIGE_API MVImage
{
public:
    MVImage();
    ~MVImage();

    /*!
     *  \brief ?????????????????Bit?????????
     *  \param [in]	nWidth	??
     *  \param [in]	nHeight	??
     *  \param [in]	nBPP	?????Bit????????¦¶?8(8bit???),16(16bit???),24(8bit???),48(16bit???)
     *  \retval  	int
     */
    int Create( int nWidth, int nHeight, int nBPP );

    /*!
     *  \brief ???????????????????????????
     *  \param [in]	nWidth	????
     *  \param [in]	nHeight	???
     *  \param [in]	PixelFormat	??????
     *	\note
     *	@verbatim
     *	------------------------------------------------
     *	|Pixelformat			|	Image Format		|
     *	------------------------------------------------
     *	|PixelFormat_Mono8		|	8 Bits ????		|
     *	------------------------------------------------
     *	|PixelFormat_Mono16		|	16 Bits ????		|
     *	------------------------------------------------
     *	|PixelFormat_BayerBG8	|						|
     *	|PixelFormat_BayerRG8	|						|
     *	|PixelFormat_BayerGB8	|	24 Bits BGR????	|
     *	|PixelFormat_BayerGR8	|						|
     *	------------------------------------------------
     *	|PixelFormat_BayerBG16	|						|
     *	|PixelFormat_BayerRG16	|						|
     *	|PixelFormat_BayerGB16	|	48 Bits BGR????	|
     *	|PixelFormat_BayerGR16	|						|
     *	------------------------------------------------
     *	@endverbatim
     *  \retval  	int
     */
    int CreateByPixelFormat( int nWidth, int nHeight, MV_PixelFormatEnums PixelFormat );

    /*!
     *  \brief ?§Ø????????????????Create??CreateByPixelFormat??????????
     *  \retval  	BOOL
     */
    BOOL IsNull();

    /*!
     *  \brief ?????????????¦Ë?????
     *  \retval  	???????
     */
    int GetWidth();

    /*!
     *  \brief ????????????¦Ë?????
     *  \retval  	??????
     */
    int GetHeight();

    /*!
     *  \brief ???????????????
     *  \retval  ???????????????
     */
    void* GetBits();

    /*!
     *  \brief ????????????????
     *  \retval  ?????????????
     */
    int	GetPitch();

    /*!
     *  \brief ??????????????????¦Ë??
     *  \retval  ??????????¦Ë????
     *  \note	8: 8Bit ??????16: 16Bit ??????24: 8Bit BGR??????48: 16Bit BGR????
     */
    int	GetBPP();

    /*!
     *  \brief ???HBITMAP??????????????????????AVI
     *  \retval  HBITMAP????????
     */
    HBITMAP GetHBitmap();

    /*!
     *  \brief ?????DC????????????????????????????
     *  \param [in]	hDestDC	???DC?????
     *  \param [in]	xDest	x??????????¦Å???????
     *  \param [in]	yDest	y??????????¦Å???????
     *  \param [in]	nDestWidth	???????????¦±?
     *  \param [in]	nDestHeight	??????????¦±?
     *  \param [in]	xSrc	x????????¦Å???????
     *  \param [in]	ySrc	y????????¦Å???????
     *  \param [in]	nSrcWidth	?????????¦±?
     *  \param [in]	nSrcHeight	????????¦±?
     *  \retval
     */
    BOOL Draw( HDC hDestDC, int xDest, int yDest, int nDestWidth, int nDestHeight, int xSrc, int ySrc, int nSrcWidth, int nSrcHeight );

    /*!
     *  \brief ?????DC???????????????????????
     *  \param [in]	hDestDC	???DC?????
     *  \param [in]	xDest	x??????????¦Å???????
     *  \param [in]	yDest	y??????????¦Å???????
     *  \param [in]	nDestWidth	???????????¦±?
     *  \param [in]	nDestHeight	??????????¦±?
     *  \retval
     */
    BOOL Draw( HDC hDestDC, int xDest, int yDest, int nDestWidth, int nDestHeight );

    /*!
     *  \brief ?????DC??????¦Ë??1:1????????
     *  \param [in]	hDestDC	???DC
     *  \param [in]	xDest	?????????????????
     *  \param [in]	yDest	??????????????????
     *  \retval
     */
    BOOL Draw( HDC hDestDC, int xDest, int yDest );

    /*!
     *  \brief ????????DC????????????????????¦±?
     *  \retval  ???DC
     *	\note	??y??????????ReleaseDC???????
     */
    HDC GetDC();

    /*!
     *  \brief ??????GetDC?????DC
     */
    void ReleaseDC();

    /*!
     *  \brief ???????
     *  \param [in]	pszFileName	??????????????????.bmp,.jpg,.tif,.raw(?????¦Ë???16¦Ë?????)
     *  \retval
     *  \note 16¦Ë??48¦Ë???????????.tif??????????16¦Ë??48¦Ë¦Ë?þŸ?????bmp,jpg????????8¦Ë??24¦Ë????µµ
     */
    int Save(LPCTSTR pszFileName);

    /*!
     *  \brief ???????????
     *  \param [in]	pszFileName	???????????????????.bmp,.jpg,.tif,.raw
     *  \retval
     */
    int Load( LPCTSTR pszFileName );

    /*!
     *  \brief ???ATL::CImage
     *  \retval
     */
    void *GetCImageHandle();

    /*!
     *  \brief ?????????
     *  \retval
     */
    void Destroy();

    /*!
     *  \brief ??????
     *  \retval
     */
    int Smooth();
private:
    HANDLE m_hImage;
    HANDLE m_hImage16;
};

#endif
